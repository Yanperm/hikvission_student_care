# ЁЯТЪ LINE OA Setup Guide

## ЁЯУЛ р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE Official Account

### 1. р╕кр╕гр╣Йр╕▓р╕З LINE OA
1. р╣Ар╕Вр╣Йр╕▓ https://manager.line.biz/
2. р╕кр╕гр╣Йр╕▓р╕З Official Account р╣Гр╕лр╕бр╣И
3. р╕Ир╕Фр╕Ър╕▒р╕Щр╕Чр╕╢р╕Б LINE OA ID (р╣Ар╕Кр╣Ир╕Щ @abc1234)

### 2. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Messaging API
1. р╣Ар╕Вр╣Йр╕▓ https://developers.line.biz/console/
2. р╣Ар╕ер╕╖р╕нр╕Б Provider р╣Бр╕ер╕░ Channel
3. р╣Др╕Ыр╕Чр╕╡р╣Ир╣Бр╕Чр╣Зр╕Ъ **Messaging API**
4. р╕Др╕▒р╕Фр╕ер╕нр╕Б:
   - **Channel Access Token** (Long-lived)
   - **Channel Secret**

### 3. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Webhook
1. р╣Гр╕Щр╕лр╕Щр╣Йр╕▓ Messaging API
2. р╕лр╕▓р╕кр╣Ир╕зр╕Щ **Webhook settings**
3. р╣Гр╕кр╣И Webhook URL:
   ```
   https://your-domain.com/webhook/line
   ```
   р╕лр╕гр╕╖р╕н
   ```
   http://your-ip:5000/webhook/line
   ```
4. р╣Ар╕Ыр╕┤р╕Ф **Use webhook**: ON
5. р╣Ар╕Ыр╕┤р╕Ф **Verify webhook**: р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н

### 4. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Гр╕Щр╕гр╕░р╕Ър╕Ъ
1. р╣Ар╕Вр╣Йр╕▓р╕лр╕Щр╣Йр╕▓ **р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE OA** р╣Гр╕Щр╕гр╕░р╕Ър╕Ъ
2. р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕е:
   - LINE OA ID: `@abc1234`
   - Channel Access Token: `р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕Ир╕▓р╕Б LINE Developers`
   - Channel Secret: `р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕Ир╕▓р╕Б LINE Developers`
3. р╕Др╕ер╕┤р╕Б **р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓**

### 5. р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ
1. р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Юр╕╖р╣Ир╕нр╕Щ LINE OA
2. р╕кр╣Ир╕Зр╕гр╕лр╕▒р╕кр╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щ (р╣Ар╕Кр╣Ир╕Щ STD001)
3. р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕Хр╕нр╕Ър╕Бр╕ер╕▒р╕Ър╕зр╣Ир╕▓р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕кр╕│р╣Ар╕гр╣Зр╕И

---

## ЁЯФЧ Webhook URL

### Local Development
```
http://localhost:5000/webhook/line
```

### Production (р╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й HTTPS)
```
https://your-domain.com/webhook/line
```

**р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕:** LINE OA р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г HTTPS р╕кр╕│р╕лр╕гр╕▒р╕Ъ production

---

## ЁЯФз Webhook Endpoint

### URL
```
POST /webhook/line
```

### р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ
- р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ир╕▓р╕Бр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕лр╕▒р╕кр╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щ
- р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н LINE User ID р╕Бр╕▒р╕Ър╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щ
- р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Хр╕нр╕Ър╕Бр╕ер╕▒р╕Ъ

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
```
р╕Ьр╕╣р╣Йр╕Ыр╕Бр╕Др╕гр╕нр╕З: STD001
р╕гр╕░р╕Ър╕Ъ: тЬЕ р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕кр╕│р╣Ар╕гр╣Зр╕И!
      ЁЯСд р╕Кр╕╖р╣Ир╕н: р╕кр╕бр╕Кр╕▓р╕в р╣Гр╕Ир╕Фр╕╡
      ЁЯПл р╕лр╣Йр╕нр╕З: р╕б.1/1
```

---

## ЁЯУ▒ р╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

р╣Ар╕бр╕╖р╣Ир╕нр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Ар╕кр╕гр╣Зр╕И р╕гр╕░р╕Ър╕Ър╕Ир╕░р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕н:

### ЁЯЯв р╣Ар╕Вр╣Йр╕▓р╣Вр╕гр╕Зр╣Ар╕гр╕╡р╕вр╕Щ
```
ЁЯЯв р╕Ър╕╕р╕Хр╕гр╕Вр╕нр╕Зр╕Чр╣Ир╕▓р╕Щр╕бр╕▓р╕Цр╕╢р╕Зр╣Вр╕гр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╣Бр╕ер╣Йр╕з

ЁЯСд р╕Кр╕╖р╣Ир╕н: р╕кр╕бр╕Кр╕▓р╕в р╣Гр╕Ир╕Фр╕╡
ЁЯЖФ р╕гр╕лр╕▒р╕к: STD001
тП░ р╣Ар╕зр╕ер╕▓: 07:30 р╕Щ.

тЬЕ р╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕Ир╕▒р╕Ър╣Гр╕Ър╕лр╕Щр╣Йр╕▓р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
```

### ЁЯЯа р╕нр╕нр╕Бр╕Ир╕▓р╕Бр╣Вр╕гр╕Зр╣Ар╕гр╕╡р╕вр╕Щ
```
ЁЯЯа р╕Ър╕╕р╕Хр╕гр╕Вр╕нр╕Зр╕Чр╣Ир╕▓р╕Щр╕нр╕нр╕Бр╕Ир╕▓р╕Бр╣Вр╕гр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╣Бр╕ер╣Йр╕з

ЁЯСд р╕Кр╕╖р╣Ир╕н: р╕кр╕бр╕Кр╕▓р╕в р╣Гр╕Ир╕Фр╕╡
ЁЯЖФ р╕гр╕лр╕▒р╕к: STD001
тП░ р╣Ар╕зр╕ер╕▓: 16:00 р╕Щ.
```

### тЪая╕П р╕Вр╕▓р╕Фр╣Ар╕гр╕╡р╕вр╕Щ
```
тЪая╕П р╕Ър╕╕р╕Хр╕гр╕Вр╕нр╕Зр╕Чр╣Ир╕▓р╕Щр╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕▓р╣Вр╕гр╕Зр╣Ар╕гр╕╡р╕вр╕Щ

ЁЯСд р╕Кр╕╖р╣Ир╕н: р╕кр╕бр╕Кр╕▓р╕в р╣Гр╕Ир╕Фр╕╡
ЁЯУЕ р╕зр╕▒р╕Щр╕Чр╕╡р╣И: 19/12/2567
тП░ р╣Ар╕зр╕ер╕▓: 09:00 р╕Щ.
```

---

## ЁЯФР Security

### Channel Secret
- р╣Гр╕Кр╣Йр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕бр╕▓р╕Ир╕▓р╕Б LINE р╕Ир╕гр╕┤р╕З
- р╣Ар╕Бр╣Зр╕Ър╣Др╕зр╣Йр╣Ар╕Ыр╣Зр╕Щр╕Др╕зр╕▓р╕бр╕ер╕▒р╕Ъ
- р╕нр╕вр╣Ир╕▓ commit р╕ер╕З Git

### Channel Access Token
- р╣Гр╕Кр╣Йр╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Др╕Ыр╕лр╕▓р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- р╕бр╕╡р╕нр╕▓р╕вр╕╕ Long-lived (р╣Др╕бр╣Ир╕лр╕бр╕Фр╕нр╕▓р╕вр╕╕)
- р╣Ар╕Бр╣Зр╕Ър╣Др╕зр╣Йр╣Ар╕Ыр╣Зр╕Щр╕Др╕зр╕▓р╕бр╕ер╕▒р╕Ъ

---

## ЁЯзк Testing

### 1. р╕Чр╕Фр╕кр╕нр╕Ъ Webhook
```bash
curl -X POST http://localhost:5000/webhook/line \
  -H "Content-Type: application/json" \
  -d '{
    "events": [{
      "type": "message",
      "message": {"type": "text", "text": "STD001"},
      "source": {"userId": "U1234567890"}
    }]
  }'
```

### 2. р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
```python
from line_oa import LineOA

line = LineOA('YOUR_CHANNEL_ACCESS_TOKEN')
line.send_message('USER_ID', 'р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б')
```

---

## тЪая╕П Troubleshooting

### Webhook р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ URL р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ HTTPS (production)
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Channel Secret
4. р╕Фр╕╣ logs: `python local_app.py`

### р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Др╕бр╣Ир╣Др╕Фр╣Й
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Channel Access Token
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ User ID р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Юр╕╖р╣Ир╕нр╕Щр╣Бр╕ер╣Йр╕з

### р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н LINE р╣Бр╕ер╣Йр╕з (р╕кр╣Ир╕Зр╕гр╕лр╕▒р╕кр╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щ)
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ LINE OA р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Webhook р╕Чр╕│р╕Зр╕▓р╕Щ

---

## ЁЯУЮ Support

р╕лр╕▓р╕Бр╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓:
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ logs
2. р╕Чр╕Фр╕кр╕нр╕Ъ Webhook URL
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Channel Access Token

---

┬й 2025 SOFTUBON CO.,LTD. - LINE OA Integration
